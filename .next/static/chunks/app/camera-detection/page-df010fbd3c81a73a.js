(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[150],{88:(e,s,t)=>{"use strict";t.d(s,{d:()=>l});var a=t(5155);t(2115);var n=t(4884),r=t(3999);function l(e){let{className:s,...t}=e;return(0,a.jsx)(n.bL,{"data-slot":"switch",className:(0,r.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:(0,a.jsx)(n.zi,{"data-slot":"switch-thumb",className:(0,r.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},593:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var a=t(5155),n=t(2115),r=t(7168),l=t(8482),c=t(9026),i=t(1154),d=t(646),o=t(5339),x=t(4355),h=t(381),m=t(4616),u=t(4964),j=t(8715),p=t(6474),g=t(5196),f=t(7863),v=t(3999);function N(e){let{...s}=e;return(0,a.jsx)(j.bL,{"data-slot":"select",...s})}function b(e){let{...s}=e;return(0,a.jsx)(j.WT,{"data-slot":"select-value",...s})}function y(e){let{className:s,size:t="default",children:n,...r}=e;return(0,a.jsxs)(j.l9,{"data-slot":"select-trigger","data-size":t,className:(0,v.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...r,children:[n,(0,a.jsx)(j.In,{asChild:!0,children:(0,a.jsx)(p.A,{className:"size-4 opacity-50"})})]})}function w(e){let{className:s,children:t,position:n="popper",...r}=e;return(0,a.jsx)(j.ZL,{children:(0,a.jsxs)(j.UC,{"data-slot":"select-content",className:(0,v.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...r,children:[(0,a.jsx)(k,{}),(0,a.jsx)(j.LM,{className:(0,v.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(C,{})]})})}function S(e){let{className:s,children:t,...n}=e;return(0,a.jsxs)(j.q7,{"data-slot":"select-item",className:(0,v.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(j.VF,{children:(0,a.jsx)(g.A,{className:"size-4"})})}),(0,a.jsx)(j.p4,{children:t})]})}function k(e){let{className:s,...t}=e;return(0,a.jsx)(j.PP,{"data-slot":"select-scroll-up-button",className:(0,v.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(f.A,{className:"size-4"})})}function C(e){let{className:s,...t}=e;return(0,a.jsx)(j.wn,{"data-slot":"select-scroll-down-button",className:(0,v.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(p.A,{className:"size-4"})})}var A=t(88),F=t(2714),z=t(1308);let E=t(9509).env.NEXT_PUBLIC_API_URL||"http://localhost:5000";function _(){let[e,s]=(0,n.useState)(!1),[t,j]=(0,n.useState)(!1),[p,g]=(0,n.useState)(null),[f,v]=(0,n.useState)(null),[k,C]=(0,n.useState)("webcam"),[_,D]=(0,n.useState)("violence"),[P,L]=(0,n.useState)(65),[I,T]=(0,n.useState)(!0),[J,B]=(0,n.useState)(!0),[Z,R]=(0,n.useState)([]),[V,W]=(0,n.useState)("connecting"),[M,U]=(0,n.useState)([{id:"webcam",name:"Webcam"},{id:"cam1",name:"Front Entrance"},{id:"cam2",name:"Parking Lot"},{id:"cam3",name:"Hallway"}]),X=(0,z.L)();(0,n.useEffect)(()=>{(async()=>{try{(await fetch("".concat(E,"/"),{method:"GET"})).ok?W("connected"):W("error")}catch(e){console.error("API connection error:",e),W("error")}})(),R(X.getAvailableStrategies())},[X]);let $=async e=>{e&&e.preventDefault(),j(!0),g(null);try{let e;let t=async()=>{let e=await fetch("".concat(E,"/detect_camera"),{method:"GET"});if(!e.ok)throw Error("API error: ".concat(e.status," ").concat(e.statusText));return await e.json()},a=X.detectViolenceFromCamera(k,_);try{"connected"===V&&(e=await t())}catch(e){console.error("API error:",e)}await a;let n=Z.find(e=>e.id===_),r=n?n.name:"selected strategy",l="Detection started on camera ".concat(k," using ").concat(r);e?l+=". ".concat(e.message||"API connected successfully"):"connected"===V?l+=". API Status: Error connecting to backend":l+=". Using local detection only",v(l),s(!0)}catch(e){console.error("Error starting camera detection:",e),g(e instanceof Error?e.message:"An unknown error occurred"),s(!1)}finally{j(!1)}},q=async()=>{j(!0);try{s(!1),v("Camera detection stopped. If the detection window is still open on the server, press 'q' to close it.")}catch(e){console.error("Error stopping camera detection:",e),g(e instanceof Error?e.message:"An unknown error occurred")}finally{j(!1)}},G=Z.find(e=>e.id===_);return(0,a.jsxs)("div",{className:"container mx-auto py-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Camera Detection"}),(0,a.jsxs)(u.tU,{defaultValue:"live",children:[(0,a.jsxs)(u.j7,{className:"grid w-full grid-cols-3 mb-6",children:[(0,a.jsx)(u.Xi,{value:"live",children:"Live Detection"}),(0,a.jsx)(u.Xi,{value:"cameras",children:"Camera Management"}),(0,a.jsx)(u.Xi,{value:"settings",children:"Detection Settings"})]}),(0,a.jsxs)(u.av,{value:"live",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsxs)(l.Zp,{className:"h-full",children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsxs)(l.ZB,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Live Camera Feed"}),(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)("span",{className:"mr-2",children:"API Status:"}),"connecting"===V&&(0,a.jsxs)("span",{className:"flex items-center text-yellow-500",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 mr-1 animate-spin"}),"Connecting"]}),"connected"===V&&(0,a.jsxs)("span",{className:"flex items-center text-green-500",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-1"}),"Connected"]}),"error"===V&&(0,a.jsxs)("span",{className:"flex items-center text-red-500",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-1"}),"Error"]})]})]}),(0,a.jsx)(l.BT,{children:"Real-time violence detection from selected camera"})]}),(0,a.jsx)(l.Wu,{className:"flex flex-col items-center justify-center h-80 bg-gray-100 rounded-md",children:e?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-2",children:"Camera detection is active"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"connected"===V?"Camera window is open on the server machine. Press 'q' on the server to stop detection.":"Using local detection only"})]}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(x.A,{className:"h-24 w-24 text-gray-300 mx-auto mb-4"}),(0,a.jsxs)("p",{className:"text-gray-500",children:["Select a camera and click ","Start Detection"]})]})}),(0,a.jsxs)(l.wL,{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"w-1/3",children:(0,a.jsxs)(N,{value:k,onValueChange:C,children:[(0,a.jsx)(y,{children:(0,a.jsx)(b,{placeholder:"Select Camera"})}),(0,a.jsx)(w,{children:M.map(e=>(0,a.jsx)(S,{value:e.id,children:e.name},e.id))})]})}),e?(0,a.jsx)(r.$,{onClick:q,disabled:t,variant:"destructive",className:"w-1/2",children:t?"Stopping...":"Stop Detection"}):(0,a.jsx)(r.$,{onClick:$,disabled:t,className:"w-1/2",children:t?"Starting...":"Start Detection"})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(l.Zp,{className:"mb-6",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Detection Strategy"})}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsxs)(N,{value:_,onValueChange:D,children:[(0,a.jsx)(y,{children:(0,a.jsx)(b,{placeholder:"Select Strategy"})}),(0,a.jsx)(w,{children:Z.map(e=>(0,a.jsx)(S,{value:e.id,children:e.name},e.id))})]}),G&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Accuracy:"})," ",G.accuracy.toFixed(1),"%"]}),(0,a.jsx)("p",{className:"mt-1",children:G.description})]})]})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Detection Settings"})}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsxs)(F.J,{htmlFor:"threshold",children:["Alert Threshold: ",P,"%"]}),(0,a.jsx)("input",{id:"threshold",type:"range",min:"0",max:"100",value:P,onChange:e=>L(Number.parseInt(e.target.value)),className:"w-full"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(F.J,{htmlFor:"notifications",children:"Enable Notifications"}),(0,a.jsx)(A.d,{id:"notifications",checked:I,onCheckedChange:T})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(F.J,{htmlFor:"record",children:"Record Detections"}),(0,a.jsx)(A.d,{id:"record",checked:J,onCheckedChange:B})]})]})]})]})]}),p&&(0,a.jsxs)(c.Fc,{variant:"destructive",className:"mt-6",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)(c.XL,{children:"Error"}),(0,a.jsx)(c.TN,{children:p})]}),f&&(0,a.jsxs)(c.Fc,{className:"border-green-500 bg-green-50 mt-6",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)(c.XL,{className:"text-green-700",children:"Detection Status"}),(0,a.jsx)(c.TN,{className:"text-green-600",children:f})]})]}),(0,a.jsx)(u.av,{value:"cameras",children:(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Camera Management"}),(0,a.jsx)(l.BT,{children:"Configure and manage surveillance cameras"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[M.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between border-b pb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"bg-blue-100 p-2 rounded-full",children:(0,a.jsx)(x.A,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(r.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Configure"]}),(0,a.jsx)(r.$,{variant:"outline",size:"sm",children:"Test"})]})]},e.id)),(0,a.jsxs)(r.$,{className:"w-full",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Add New Camera"]})]})})]})}),(0,a.jsx)(u.av,{value:"settings",children:(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Detection Settings"}),(0,a.jsx)(l.BT,{children:"Configure violence detection parameters"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Detection Parameters"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(F.J,{htmlFor:"global-threshold",children:"Global Alert Threshold"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{id:"global-threshold",type:"range",min:"0",max:"100",value:P,onChange:e=>L(Number.parseInt(e.target.value)),className:"flex-1"}),(0,a.jsxs)("span",{className:"w-12 text-right",children:[P,"%"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(F.J,{children:"Detection Frequency"}),(0,a.jsxs)(N,{defaultValue:"normal",children:[(0,a.jsx)(y,{children:(0,a.jsx)(b,{placeholder:"Select Frequency"})}),(0,a.jsxs)(w,{children:[(0,a.jsx)(S,{value:"low",children:"Low (Every 3 seconds)"}),(0,a.jsx)(S,{value:"normal",children:"Normal (Every 1.5 seconds)"}),(0,a.jsx)(S,{value:"high",children:"High (Every 0.5 seconds)"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(F.J,{children:"Frame Buffer Size"}),(0,a.jsxs)(N,{defaultValue:"30",children:[(0,a.jsx)(y,{children:(0,a.jsx)(b,{placeholder:"Select Buffer Size"})}),(0,a.jsxs)(w,{children:[(0,a.jsx)(S,{value:"15",children:"15 Frames"}),(0,a.jsx)(S,{value:"30",children:"30 Frames"}),(0,a.jsx)(S,{value:"45",children:"45 Frames"}),(0,a.jsx)(S,{value:"60",children:"60 Frames"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Notification Settings"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(F.J,{htmlFor:"email-alerts",children:"Email Alerts"}),(0,a.jsx)(A.d,{id:"email-alerts"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(F.J,{htmlFor:"sms-alerts",children:"SMS Alerts"}),(0,a.jsx)(A.d,{id:"sms-alerts"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(F.J,{htmlFor:"push-alerts",children:"Push Notifications"}),(0,a.jsx)(A.d,{id:"push-alerts",checked:I,onCheckedChange:T})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(F.J,{htmlFor:"record-clips",children:"Record Alert Clips"}),(0,a.jsx)(A.d,{id:"record-clips",checked:J,onCheckedChange:B})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(F.J,{children:"Alert Cooldown Period"}),(0,a.jsxs)(N,{defaultValue:"30",children:[(0,a.jsx)(y,{children:(0,a.jsx)(b,{placeholder:"Select Cooldown"})}),(0,a.jsxs)(w,{children:[(0,a.jsx)(S,{value:"0",children:"No Cooldown"}),(0,a.jsx)(S,{value:"15",children:"15 Seconds"}),(0,a.jsx)(S,{value:"30",children:"30 Seconds"}),(0,a.jsx)(S,{value:"60",children:"1 Minute"}),(0,a.jsx)(S,{value:"300",children:"5 Minutes"})]})]})]})]})]}),(0,a.jsx)(r.$,{className:"w-full",children:"Save Settings"})]})})]})})]})]})}},2714:(e,s,t)=>{"use strict";t.d(s,{J:()=>l});var a=t(5155);t(2115);var n=t(968),r=t(3999);function l(e){let{className:s,...t}=e;return(0,a.jsx)(n.b,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}},7204:(e,s,t)=>{Promise.resolve().then(t.bind(t,593))}},e=>{var s=s=>e(e.s=s);e.O(0,[455,52,519,753,24,441,684,358],()=>s(7204)),_N_E=e.O()}]);