(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{646:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},704:(e,a,t)=>{"use strict";t.d(a,{B8:()=>P,UC:()=>I,bL:()=>V,l9:()=>S});var s=t(2115),r=t(5185),l=t(6081),i=t(9196),n=t(8905),c=t(3655),o=t(4315),d=t(5845),u=t(1285),m=t(5155),h="Tabs",[x,p]=(0,l.A)(h,[i.RG]),v=(0,i.RG)(),[f,g]=x(h),j=s.forwardRef((e,a)=>{let{__scopeTabs:t,value:s,onValueChange:r,defaultValue:l,orientation:i="horizontal",dir:n,activationMode:h="automatic",...x}=e,p=(0,o.jH)(n),[v,g]=(0,d.i)({prop:s,onChange:r,defaultProp:l});return(0,m.jsx)(f,{scope:t,baseId:(0,u.B)(),value:v,onValueChange:g,orientation:i,dir:p,activationMode:h,children:(0,m.jsx)(c.sG.div,{dir:p,"data-orientation":i,...x,ref:a})})});j.displayName=h;var y="TabsList",b=s.forwardRef((e,a)=>{let{__scopeTabs:t,loop:s=!0,...r}=e,l=g(y,t),n=v(t);return(0,m.jsx)(i.bL,{asChild:!0,...n,orientation:l.orientation,dir:l.dir,loop:s,children:(0,m.jsx)(c.sG.div,{role:"tablist","aria-orientation":l.orientation,...r,ref:a})})});b.displayName=y;var N="TabsTrigger",w=s.forwardRef((e,a)=>{let{__scopeTabs:t,value:s,disabled:l=!1,...n}=e,o=g(N,t),d=v(t),u=C(o.baseId,s),h=R(o.baseId,s),x=s===o.value;return(0,m.jsx)(i.q7,{asChild:!0,...d,focusable:!l,active:x,children:(0,m.jsx)(c.sG.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":h,"data-state":x?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:u,...n,ref:a,onMouseDown:(0,r.m)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(s)}),onKeyDown:(0,r.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(s)}),onFocus:(0,r.m)(e.onFocus,()=>{let e="manual"!==o.activationMode;x||l||!e||o.onValueChange(s)})})})});w.displayName=N;var A="TabsContent",k=s.forwardRef((e,a)=>{let{__scopeTabs:t,value:r,forceMount:l,children:i,...o}=e,d=g(A,t),u=C(d.baseId,r),h=R(d.baseId,r),x=r===d.value,p=s.useRef(x);return s.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,m.jsx)(n.C,{present:l||x,children:t=>{let{present:s}=t;return(0,m.jsx)(c.sG.div,{"data-state":x?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!s,id:h,tabIndex:0,...o,ref:a,style:{...e.style,animationDuration:p.current?"0s":void 0},children:s&&i})}})});function C(e,a){return"".concat(e,"-trigger-").concat(a)}function R(e,a){return"".concat(e,"-content-").concat(a)}k.displayName=A;var V=j,P=b,S=w,I=k},1284:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},4432:(e,a,t)=>{Promise.resolve().then(t.bind(t,4983))},4861:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},4983:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>f});var s=t(5155),r=t(2115),l=t(7168),i=t(8482),n=t(5295),c=t(1284),o=t(9869),d=t(5339),u=t(4861),m=t(646),h=t(9026),x=t(4964),p=t(1308);let v=t(9509).env.NEXT_PUBLIC_API_URL||"http://localhost:5000";function f(){let[e,a]=(0,r.useState)(null),[t,f]=(0,r.useState)(null),[g,j]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null),[N,w]=(0,r.useState)(null),[A,k]=(0,r.useState)(0),C=(0,r.useRef)(null),[R,V]=(0,r.useState)("upload"),[P,S]=(0,r.useState)("violence"),[I,M]=(0,r.useState)([]),L=(0,p.L)();(0,r.useEffect)(()=>{M(L.getAvailableStrategies())},[L]);let T=async a=>{if(a&&a.preventDefault(),!e){w("Please upload a video first");return}j(!0),w(null),k(0);try{let a=new FormData;a.append("file",e),a.append("strategy",P);let t=setInterval(()=>{k(e=>Math.min(e+10*Math.random(),90))},300),s=await fetch("".concat(v,"/api/predict"),{method:"POST",body:a});if(clearInterval(t),k(95),!s.ok)throw Error("API error: ".concat(s.status," ").concat(s.statusText));let r=await s.json();k(100);let l=await L.detectViolenceInVideo(e,P),i={fight:void 0!==r.fight?r.fight:l.fight,percentageoffight:void 0!==r.confidence?r.confidence.toString():l.percentageoffight,processing_time_ms:void 0!==r.processing_time_ms?r.processing_time_ms.toString():l.processing_time_ms,apiResponse:r,regions:l.regions,metadata:l.metadata,timestamp:l.timestamp,detectionType:l.type};b(i)}catch(a){console.error("Error during video analysis:",a),w(a instanceof Error?a.message:"An unknown error occurred");try{let a=await L.detectViolenceInVideo(e,P);b(a),w("API error, showing local results instead")}catch(e){console.error("Fallback detection also failed:",e)}}finally{j(!1),k(100)}};(0,r.useEffect)(()=>()=>{t&&URL.revokeObjectURL(t)},[t]);let U=I.find(e=>e.id===P);return(0,s.jsxs)("div",{className:"container mx-auto py-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Video Detection"}),(0,s.jsxs)(x.tU,{defaultValue:"upload",onValueChange:V,children:[(0,s.jsxs)(x.j7,{className:"grid w-full grid-cols-3 mb-6",children:[(0,s.jsx)(x.Xi,{value:"upload",children:"Upload Video"}),(0,s.jsx)(x.Xi,{value:"url",children:"Video URL"}),(0,s.jsx)(x.Xi,{value:"batch",children:"Batch Processing"})]}),(0,s.jsx)(x.av,{value:"upload",children:(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)(i.ZB,{children:"Upload Video for Analysis"}),(0,s.jsx)(i.BT,{children:"Upload a video file to detect violent behavior"})]}),(0,s.jsxs)(i.Wu,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Select Detection Strategy"}),(0,s.jsx)("select",{className:"w-full p-2 border rounded-md",value:P,onChange:e=>S(e.target.value),children:I.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (",e.accuracy.toFixed(1),"% accuracy)"]},e.id))})]}),U&&(0,s.jsxs)(h.Fc,{children:[(0,s.jsx)(c.A,{className:"h-4 w-4"}),(0,s.jsx)(h.XL,{children:"Strategy Information"}),(0,s.jsx)(h.TN,{children:U.description})]})]}),(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>{var e;null===(e=C.current)||void 0===e||e.click()},children:[(0,s.jsx)("input",{type:"file",ref:C,onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){if(!s.type.startsWith("video/")){w("Please upload a video file"),a(null),f(null);return}if(s.size>0x6400000){w("File size exceeds 100MB limit"),a(null),f(null);return}a(s),w(null),b(null),f(URL.createObjectURL(s))}},accept:"video/*",className:"hidden"}),(0,s.jsx)(o.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Click to upload or drag and drop"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"MP4, AVI, MOV up to 100MB"})]}),t&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Video Preview:"}),(0,s.jsx)("video",{src:t,controls:!0,className:"w-full rounded-md border border-gray-200",style:{maxHeight:"300px"}}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[null==e?void 0:e.name,(null==e?void 0:e.size)!==void 0?" (".concat((e.size/1048576).toFixed(2)," MB)"):""]})]}),N&&(0,s.jsxs)(h.Fc,{variant:"destructive",children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),(0,s.jsx)(h.XL,{children:"Error"}),(0,s.jsx)(h.TN,{children:N})]}),g&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("p",{className:"text-sm font-medium",children:["Processing video using ",null==U?void 0:U.name,"..."]}),(0,s.jsx)(n.k,{value:A,className:"h-2"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 text-right",children:[Math.round(A),"%"]})]}),y&&(0,s.jsxs)(h.Fc,{className:y.fight?"border-red-500 bg-red-50":"border-green-500 bg-green-50",children:[y.fight?(0,s.jsx)(u.A,{className:"h-4 w-4 text-red-600"}):(0,s.jsx)(m.A,{className:"h-4 w-4 text-green-600"}),(0,s.jsx)(h.XL,{className:y.fight?"text-red-700":"text-green-700",children:y.fight?"Violence Detected":"No Violence Detected"}),(0,s.jsx)(h.TN,{children:(0,s.jsxs)("div",{className:"mt-2 text-sm",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Confidence:"})," ",y.percentageoffight,"%"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Processing Time:"})," ",y.processing_time_ms,"ms"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Strategy Used:"})," ",null==U?void 0:U.name]}),y.regions&&y.regions.length>0&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Detected Regions:"})," ",y.regions.length]}),y.metadata&&y.metadata.violenceType&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Violence Type:"})," ",y.metadata.violenceType]}),y.apiResponse&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"API Status:"})," Connected"]})]})})]})]}),(0,s.jsx)(i.wL,{children:(0,s.jsx)(l.$,{onClick:T,disabled:!e||g,className:"w-full",children:g?"Processing...":"Analyze Video"})})]})}),(0,s.jsx)(x.av,{value:"url",children:(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)(i.ZB,{children:"Analyze Video from URL"}),(0,s.jsx)(i.BT,{children:"Enter a URL to a video file for analysis"})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Select Detection Strategy"}),(0,s.jsx)("select",{className:"w-full p-2 border rounded-md",value:P,onChange:e=>S(e.target.value),children:I.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (",e.accuracy.toFixed(1),"% accuracy)"]},e.id))})]}),(0,s.jsxs)("div",{className:"grid w-full items-center gap-1.5",children:[(0,s.jsx)("label",{htmlFor:"video-url",className:"text-sm font-medium",children:"Video URL"}),(0,s.jsx)("input",{id:"video-url",type:"url",placeholder:"https://example.com/video.mp4",className:"w-full p-2 border rounded-md"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Supported formats: MP4, AVI, MOV. Maximum file size: 100MB."})]})}),(0,s.jsx)(i.wL,{children:(0,s.jsx)(l.$,{className:"w-full",children:"Analyze from URL"})})]})}),(0,s.jsx)(x.av,{value:"batch",children:(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)(i.ZB,{children:"Batch Processing"}),(0,s.jsx)(i.BT,{children:"Upload multiple videos for batch analysis"})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Select Detection Strategy"}),(0,s.jsx)("select",{className:"w-full p-2 border rounded-md",value:P,onChange:e=>S(e.target.value),children:I.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (",e.accuracy.toFixed(1),"% accuracy)"]},e.id))})]}),(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,s.jsx)(o.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Click to upload multiple videos or drag and drop"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"MP4, AVI, MOV up to 100MB each"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Upload up to 10 videos for batch processing. Results will be available for download when complete."})]})}),(0,s.jsx)(i.wL,{children:(0,s.jsx)(l.$,{className:"w-full",children:"Start Batch Processing"})})]})})]})]})}},5295:(e,a,t)=>{"use strict";t.d(a,{k:()=>b});var s=t(5155),r=t(2115),l=t(6081),i=t(3655),n="Progress",[c,o]=(0,l.A)(n),[d,u]=c(n),m=r.forwardRef((e,a)=>{var t,r,l,n;let{__scopeProgress:c,value:o=null,max:u,getValueLabel:m=p,...h}=e;(u||0===u)&&!g(u)&&console.error((t="".concat(u),r="Progress","Invalid prop `max` of value `".concat(t,"` supplied to `").concat(r,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let x=g(u)?u:100;null===o||j(o,x)||console.error((l="".concat(o),n="Progress","Invalid prop `value` of value `".concat(l,"` supplied to `").concat(n,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let y=j(o,x)?o:null,b=f(y)?m(y,x):void 0;return(0,s.jsx)(d,{scope:c,value:y,max:x,children:(0,s.jsx)(i.sG.div,{"aria-valuemax":x,"aria-valuemin":0,"aria-valuenow":f(y)?y:void 0,"aria-valuetext":b,role:"progressbar","data-state":v(y,x),"data-value":null!=y?y:void 0,"data-max":x,...h,ref:a})})});m.displayName=n;var h="ProgressIndicator",x=r.forwardRef((e,a)=>{var t;let{__scopeProgress:r,...l}=e,n=u(h,r);return(0,s.jsx)(i.sG.div,{"data-state":v(n.value,n.max),"data-value":null!==(t=n.value)&&void 0!==t?t:void 0,"data-max":n.max,...l,ref:a})});function p(e,a){return"".concat(Math.round(e/a*100),"%")}function v(e,a){return null==e?"indeterminate":e===a?"complete":"loading"}function f(e){return"number"==typeof e}function g(e){return f(e)&&!isNaN(e)&&e>0}function j(e,a){return f(e)&&!isNaN(e)&&e<=a&&e>=0}x.displayName=h;var y=t(3999);let b=r.forwardRef((e,a)=>{let{className:t,value:r,...l}=e;return(0,s.jsx)(m,{ref:a,className:(0,y.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,s.jsx)(x,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});b.displayName=m.displayName},5339:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9869:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[455,52,24,441,684,358],()=>a(4432)),_N_E=e.O()}]);